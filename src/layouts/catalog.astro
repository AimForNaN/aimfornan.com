---
import { getCollection } from 'astro:content';
import { groupEntriesBy } from '../content/config';

import Footer from '../components/footer.astro';
import Head from '../components/head.astro';
import Header from '../components/header.astro';

import '../styles/global.css';

const { params, props } = Astro;
const { category } = params;
const { frontmatter } = props;
const { collections = [] } = frontmatter;

const c = await groupEntriesBy(collections, x => x.data.category);
---

<!doctype html>
<html lang="en">
	<Head title={frontmatter.title} />
	<body class="divide-base-300 divide-y flex flex-col min-h-screen">
		<main class="flex-1">
			<Header heading={frontmatter.title} />
			<ul class="list max-w-4xl mx-auto">
					<li class="list-row p-0 after:inset-x-0"></li>
				{Object.entries(c).map(([entry_category, entries]) => (
					<li class="list-row flex flex-col p-8 rounded-none [:not(:last-child)]:after:inset-x-0 md:gap-4">
						<header class="font-bold text-accent text-xl tracking-widest uppercase">
							{entry_category}
						</header>
						<nav class="flex flex-col gap-2 list-disc pl-6 md:grid md:grid-cols-3 md:p-0 lg:grid-cols-4">
							{entries.map(entry => (
								<a class="list-item hyphens-manual md:block" href={`/${entry.slug}`} set:html={entry.data.title}></a>
							))}
						</nav>
					</li>
				))}
			</ul>
		</main>
		<Footer />
	</body>
</html>
