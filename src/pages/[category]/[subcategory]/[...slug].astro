---
import { getEntry } from 'astro:content';
import { getNonRootEntries } from '../../../content/config';

export async function getStaticPaths() {
	const entries = await getNonRootEntries();
	return entries.map(entry => {
		const { collection, slug } = entry;
		const [category, subcategory] = String(collection).split('-');
		return { params: { category, slug, subcategory } };
	});
}

const { params, props} = Astro;
const { category, subcategory, slug } = params;
const entry = await getEntry(`${category}-${subcategory}`, slug);
const { Content } = await entry.render();
---

<Content />

